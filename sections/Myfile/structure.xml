<?xml version="1.0"?>
<MENU_TAB>
   <TAB section_type="common" caption="Файлы" table="iris_File" order_pos="2" image_name="file.png">
      <GRID lines_count="1" display_search="no">
         <COLUMNS>
            <ITEM db_field="File_FileName" caption="Файл" width="20%" row_type="common"/>
            <ITEM db_field="FileTypeID" caption="Тип" width="20%" row_type="fk_column" row_type_parent_table="iris_FileType" row_type_parent_display_column="Name"/>
            <ITEM db_field="FileStateID" caption="Состояние" width="20%" row_type="fk_column" row_type_parent_table="iris_FileState" row_type_parent_display_column="Name"/>
            <ITEM db_field="Version" caption="Версия" width="20%" row_type="common"/>
            <ITEM db_field="Description" caption="Описание" width="20%" row_type="common"/>

            <ITEM db_field="OwnerID" caption="Ответственный" width="20%" row_type="fk_column" row_type_parent_table="iris_Contact" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="URL" caption="URL" width="10%" row_type="common" display_format="none"/>
            <ITEM db_field="Date" caption="Дата" width="10%" row_type="common" row_datatype="date"/>
<!--
            <ITEM db_field="AccountID" caption="Компания" width="20%" row_type="fk_column" row_type_parent_table="iris_Account" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="ContactID" caption="Контакт" width="20%" row_type="fk_column" row_type_parent_table="iris_Contact" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="ObjectID" caption="Объект" width="20%" row_type="fk_column" row_type_parent_table="iris_Object" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="ProjectID" caption="Проект" width="20%" row_type="fk_column" row_type_parent_table="iris_Project" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="ProductID" caption="Продукт" width="20%" row_type="fk_column" row_type_parent_table="iris_Product" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="IssueID" caption="Выпуск" width="20%" row_type="fk_column" row_type_parent_table="iris_Issue" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="BugID" caption="Замечание" width="20%" row_type="fk_column" row_type_parent_table="iris_Bug" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="IncidentID" caption="Инцидент" width="20%" row_type="fk_column" row_type_parent_table="iris_Incident" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="AnswerID" caption="Решение" width="20%" row_type="fk_column" row_type_parent_table="iris_Answer" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="MarketingID" caption="Маркетинг" width="20%" row_type="fk_column" row_type_parent_table="iris_Marketing" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="OfferID" caption="КП" width="20%" row_type="fk_column" row_type_parent_table="iris_Offer" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="InvoiceID" caption="Счет" width="20%" row_type="fk_column" row_type_parent_table="iris_Invoice" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="FactInvoiceID" caption="Счет-фактура" width="20%" row_type="fk_column" row_type_parent_table="iris_FactInvoice" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="PactID" caption="Договор" width="20%" row_type="fk_column" row_type_parent_table="iris_Pact" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="DocumentID" caption="Документ" width="20%" row_type="fk_column" row_type_parent_table="iris_Document" row_type_parent_display_column="Name" display_format="none"/>
-->         
         </COLUMNS>
		<FILTERS>		 
            <ITEM caption="Все файлы" item_style="font-weight: bold;" where_clause="1=1"></ITEM>
		</FILTERS>			 
      </GRID>
      <GRID_WND lines_count="1" caption="Файлы" width="600" height="280">
         <COLUMNS>
            <ITEM db_field="File_FileName" caption="Файл" width="25%" row_type="common"/>
            <ITEM db_field="FileTypeID" caption="Тип" width="25%" row_type="fk_column" row_type_parent_table="iris_FileType" row_type_parent_display_column="Name"/>
            <ITEM db_field="FileStateID" caption="Состояние" width="25%" row_type="fk_column" row_type_parent_table="iris_FileState" row_type_parent_display_column="Name"/>
            <ITEM db_field="Version" caption="Версия" width="25%" row_type="common"/>

            <ITEM db_field="OwnerID" caption="Ответственный" width="20%" row_type="fk_column" row_type_parent_table="iris_Contact" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="Description" caption="Описание" width="20%" row_type="common" display_format="none"/>
            <ITEM db_field="Date" caption="Дата" width="10%" row_type="common" row_datatype="date" display_format="none"/>
            <ITEM db_field="URL" caption="URL" width="10%" row_type="common" display_format="none"/>
<!--
            <ITEM db_field="AccountID" caption="Компания" width="20%" row_type="fk_column" row_type_parent_table="iris_Account" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="ContactID" caption="Контакт" width="20%" row_type="fk_column" row_type_parent_table="iris_Contact" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="ObjectID" caption="Объект" width="20%" row_type="fk_column" row_type_parent_table="iris_Object" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="ProjectID" caption="Проект" width="20%" row_type="fk_column" row_type_parent_table="iris_Project" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="ProductID" caption="Продукт" width="20%" row_type="fk_column" row_type_parent_table="iris_Product" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="IssueID" caption="Выпуск" width="20%" row_type="fk_column" row_type_parent_table="iris_Issue" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="BugID" caption="Замечание" width="20%" row_type="fk_column" row_type_parent_table="iris_Bug" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="IncidentID" caption="Инцидент" width="20%" row_type="fk_column" row_type_parent_table="iris_Incident" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="AnswerID" caption="Решение" width="20%" row_type="fk_column" row_type_parent_table="iris_Answer" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="MarketingID" caption="Маркетинг" width="20%" row_type="fk_column" row_type_parent_table="iris_Marketing" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="OfferID" caption="КП" width="20%" row_type="fk_column" row_type_parent_table="iris_Offer" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="InvoiceID" caption="Счет" width="20%" row_type="fk_column" row_type_parent_table="iris_Invoice" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="FactInvoiceID" caption="Счет-фактура" width="20%" row_type="fk_column" row_type_parent_table="iris_FactInvoice" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="PactID" caption="Договор" width="20%" row_type="fk_column" row_type_parent_table="iris_Pact" row_type_parent_display_column="Name" display_format="none"/>
            <ITEM db_field="DocumentID" caption="Документ" width="20%" row_type="fk_column" row_type_parent_table="iris_Document" row_type_parent_display_column="Name" display_format="none"/>
-->
         </COLUMNS>
      </GRID_WND>
      <EDITCARD name="c_Myfile" caption="Файл" width="700" height="310" 
            layout="1, 1, 2, 2, 2, 1, 1, 2, 2">
         <ELEMENTS>
            <FIELD elem_type="text" caption="Файл" db_field="file_file" mandatory="yes" datatype="file" row_type="file"/>
            <FIELD elem_type="textarea" textarea_rows="2" caption="Описание" db_field="Description" mandatory="no" datatype="string" row_type="common"/>
            <FIELD elem_type="select" caption="Тип" db_field="FileTypeID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_table="iris_FileType" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Ответственный" db_field="OwnerID" mandatory="yes" filter_where="T0.id in (select id from iris_getowners())" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Contact" row_type_parent_display_column="Name"/>
            <FIELD elem_type="select" caption="Состояние" db_field="FileStateID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_table="iris_FileState" row_type_parent_display_column="Name"/>
            <FIELD elem_type="spacer"/>
            <FIELD elem_type="text" caption="Версия" db_field="Version" mandatory="no" datatype="string" row_type="common"/>
            <FIELD elem_type="text" caption="Дата" db_field="Date" mandatory="no" datatype="date" row_type="date"/>
            <FIELD elem_type="url" caption="URL" db_field="URL" mandatory="no" datatype="string" row_type="common"/>
            <FIELD elem_type="splitter" caption="Связи"/>
            <FIELD elem_type="lookup" caption="Компания" db_field="AccountID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Account" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Заказ" db_field="ProjectID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Project" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Контакт" db_field="ContactID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Contact" row_type_parent_display_column="Name"/>
            <FIELD elem_type="spacer"/>
<!--
            <FIELD elem_type="lookup" caption="Продукт" db_field="ProductID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Product" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Объект" db_field="ObjectID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Object" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Задача" db_field="TaskID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Task" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Инцидент" db_field="IncidentID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Incident" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Выпуск" db_field="IssueID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Issue" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Решение" db_field="AnswerID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Answer" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Замечание" db_field="BugID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Bug" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Мероприятие" db_field="MarketingID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Marketing" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Рекламная площадка" db_field="SpaceID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Space" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="КП" db_field="OfferID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Offer" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Договор" db_field="PactID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Pact" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Счет" db_field="InvoiceID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Invoice" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Платеж" db_field="PaymentID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Payment" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Счет-фактура" db_field="FactInvoiceID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="FactInvoice" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="Документ" db_field="DocumentID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Document" row_type_parent_display_column="Name"/>
            <FIELD elem_type="lookup" caption="E-mail" db_field="EmailID" mandatory="no" datatype="id" row_type="fk_column" row_type_parent_source_type="grid" row_type_parent_source_name="Email" row_type_parent_display_column="subject"/>
            <FIELD elem_type="spacer"/>
-->			
         </ELEMENTS>
      </EDITCARD>

      <DETAILS>
      </DETAILS>
	  
   </TAB>
</MENU_TAB>
